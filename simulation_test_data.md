# 자동 옵센 하단높이-폭 연동 보정 시뮬레이션 데이터

## 보정 로직 개요
- **하단높이가 줄어들면** → 폭이 늘어남 → 폭에 음의 보정 필요
- **하단높이가 늘어나면** → 폭이 줄어듦 → 폭에 양의 보정 필요
- **폭의 변화는 하단높이에 영향 없음** (일방향 영향)

## 시뮬레이션 테스트 케이스

### 케이스 1: 하단높이 부족 (LOW)
```
기준값: 하단높이 21.700mm, 폭 17.187mm
측정값: 하단높이 21.650mm, 폭 17.190mm

분석:
- 하단높이 편차: 21.650 - 21.700 = -0.050mm (부족)
- 폭 편차: 17.190 - 17.187 = +0.003mm (약간 초과)

보정 계산:
- 하단높이 보정: 21.700 - 21.650 = +0.050mm
- 하단높이 보정으로 인한 폭 연동 보정: -0.050mm (반대 방향)

실제 CNC 적용:
- T7 Z축 (하단높이): +0.050mm
- T9 Z축 (폭): -0.050mm (연동 보정)
```

### 케이스 2: 하단높이 과다 (HIGH)
```
기준값: 하단높이 21.700mm, 폭 17.187mm
측정값: 하단높이 21.750mm, 폭 17.180mm

분석:
- 하단높이 편차: 21.750 - 21.700 = +0.050mm (과다)
- 폭 편차: 17.180 - 17.187 = -0.007mm (부족)

보정 계산:
- 하단높이 보정: 21.700 - 21.750 = -0.050mm
- 하단높이 보정으로 인한 폭 연동 보정: +0.050mm (반대 방향)

실제 CNC 적용:
- T7 Z축 (하단높이): -0.050mm
- T9 Z축 (폭): +0.050mm (연동 보정)
```

### 케이스 3: 폭만 NG인 경우
```
기준값: 하단높이 21.700mm, 폭 17.187mm
측정값: 하단높이 21.698mm (OK), 폭 17.210mm (HIGH)

분석:
- 하단높이 편차: 21.698 - 21.700 = -0.002mm (허용 범위 내)
- 폭 편차: 17.210 - 17.187 = +0.023mm (과다)

보정 계산:
- 하단높이 보정: 없음 (OK 범위)
- 폭 보정: 17.187 - 17.210 = -0.023mm
- 연동 보정: 없음 (하단높이가 보정되지 않음)

실제 CNC 적용:
- T9 Z축 (폭): -0.023mm (독립 보정)
```

## 매크로 변수 설정 예시

### 케이스 1 매크로 변수
```
매크로 슬롯 A (하단높이 T7):
#100 = 7        (공구번호)
#101 = 0        (X축 보정량)
#102 = 50       (Z축 보정량, 0.050mm × 1000)

매크로 슬롯 B (폭 T9):
#103 = 9        (공구번호)
#104 = 0        (X축 보정량)
#105 = -50      (Z축 보정량, -0.050mm × 1000)
```

## 연동 보정 효과

### 물리적 관계
```
하단높이 ↓ (가공 깊이 부족) → 재료 압축 감소 → 폭 ↑ (팽창)
하단높이 ↑ (가공 깊이 과다) → 재료 압축 증가 → 폭 ↓ (수축)
```

### 보정 시너지
```
단독 보정: 각각 독립적으로 보정
연동 보정: 하단높이 보정 시 폭도 동시에 최적화
결과: 더 정확한 치수 달성 및 공차 안정성 향상
```

## UI 메시지 예시

```
하단높이 보정으로 인한 폭 연동 보정
하단높이 보정: +0.050mm
폭 연동 보정: -0.050mm
보정 원리: 하단높이 ↓ → 폭 ↑, 하단높이 ↑ → 폭 ↓
```